# ðŸ”— URLSearchParams

`jstz` implementation of an API with utility methods for working with the query string of a URL according to the [URLSearchParams specification](https://url.spec.whatwg.org/#urlsearchparams). It is used for building and manipulating search parameters.

## Example

```typescript
// Parse query string from URL
let url = new URL("https://example.com?foo=1&bar=2");
let params = new UrlSearchParams(url.search);

// Add a new parameter
params.append("baz", 3);

// Remove parameter
params.delete("bar");

// Loop through parameters
for (let [key, value] of params) {
  // ...
}
```

## Constructor

### `UrlSearchParams(values: Array<[Name: string, Value: string]>)`

Creates a new instance of `UrlSearchParams` with the provided key-value pairs.

- **values**: An array of key-value pairs. Each pair is an array where the first element is the key (Name) and the second is the value.

## Instance Methods

### `len(): number`

- **Returns**: The number of search parameters present.

### `append(name: string, value: string): void`

Appends a specified key/value pair as a new search parameter.

- **name**: The name of the search parameter.
- **value**: The value of the search parameter.

**More information**:

- [WHATWG specification](https://url.spec.whatwg.org/#dom-urlsearchparams-append)

### `remove(name: string, value?: string): void`

Removes search parameters that match the given name. If a value is provided, only parameters with that name-value pair are removed.

- **name**: The name of the search parameter to be removed.
- **value** (optional): The specific value of the search parameter to be removed.

**More information**:

- [WHATWG specification](https://url.spec.whatwg.org/#dom-urlsearchparams-delete)

### `get(name: string): string | null`

Returns the first value associated with the given search parameter.

- **name**: The name of the search parameter.

- **Returns**: The value associated with the given search parameter or `null` if not found.

**More information**:

- [WHATWG specification](https://url.spec.whatwg.org/#dom-urlsearchparams-get)

### `getAll(name: string): Array<string>`

Returns all the values associated with a given search parameter.

- **name**: The name of the search parameter.

- **Returns**: An array of values associated with the given search parameter.

**More information**:

- [WHATWG specification](https://url.spec.whatwg.org/#dom-urlsearchparams-getall)

Note: The documentation provided here is tailored for JavaScript usage, based on the Rust code you provided that is designed for a JS runtime.

```typescript
let url: URL = new URL(`tezos://${my_contract.address}/entrypoint`);
let url2: URL = new URL("../entrypoint_2", url.href);
```

Jstz smart functions each have their own unique address which is generated by jstz when the contract is deployed.
These are loosely analagous to http addresses. Jszt has its own URI scheme `tezos` to refer to contracts.
An example host of a jstz smart function would therefore be `tezos://tz4w42Gt5zkiGaHPm1ya4MgLomgkL1k7Dy7q`.

The constructor will raise and exception if the arguments cannot be parsed into a valid url.
The [`URL.canParse()`](#canParse) method can be used to check if the arguments can be parsed correctly.

```typescript
if (URL.canParse(relativePath, baseUrl)) {
  let url = new URL(relativePath, baseUrl);
  console.log(url.href);
} else {
  // the URL cannot be parsed, take appropriate action.
  console.error("Invalid URL");
}
```

We may edit or construct a url by setting values for its properties.

```typescript
let url = new URL('tezos://domain/); // not a valid jstz hostname, we'll have to change it
url.hostname = Ledger.selfAddress;
url.pathname = "my_entrypoint"
url.hash = "my_fragment"
console.log(url.href) // tezos://tz4../my_entrypoint#my_fagment
```

The [`URLSearchParams`](./url_search_params.md) API may be used to build and manipulate search parameters. To get the search parameters from the URL, you may use the `.searchParams` instance property.

```typescript
let url = new URL(`tezos://${address}/?first_name=Dave`);
switch (url.searchParams.get("first_name")) {
  case "Jim":
    url.searchParams.set("last_name", "Jones");
    break;
  case "Sarah":
    url.searchParams.set("last_name", "Smith");
    break;
  case "Dave":
    url.searchParams.set("last_name", "Davies");
    break;
}
```

## Constructor

### `URL(url: string, base?: string): URL`

Constructs a URL from a url string and an optional base string.
If `base` if present then `url` will be interpreted as a relative url.
If `base` is not present then `url` will be interpreted as an absolute url.

## Instance Properties

### `hash: string`

The fragment identifier of the URL.

### `host: string`

The host, a string containing the hostname (see below), followed by a ':' and the port of the url.

### `hostname: string`

The hostname of the url. In `jstz` this will usually be a `tz4` address of a smart function.

### `href: string` {#href}

A stringifier, returns the whole url.

### `readonly origin: string`

The origin of the url, specifically the scheme, the domain and the port.

### `password: string`

The password specified before the domain name.

### `pathname: string`

The url path. This will always begin with a `'/'` and contains the part of the url up until the query string or fragment.

### `port: string`

The port number of the url. This has no special meaning within `jstz` and will not usually be present.

### `protocol: string`

The protocol scheme of the url. Within `jstz` this will usually be `tezos:`

### `search: string`

The URL's search parameter string, This will include all the search parameters of the url, each of which begins with a `'?'`.

### `readonly searchParams: URLSearchParams`

The search parameter object. See [`URLSearchParams`](./url_search_params.md) for more information.

### `username: string`

The username specified before the domain name.

## Static Methods

### `canParse(url: string, base?: string): boolean` {#canParse}

Returns `true` if the url and base string can be parsed into a valid URL.

## Instance Methods

### `toString(): string`

An alias for [`href`](#href); returns the whole url as a string.

### `toJSON(): string`

An alias for [`href`](#href); returns the whole url as a string.
